import{a as p,i as g,r as f,h as c,e as l,f as s,u as h,w,v,j as x,F as _,k as y,l as b,m as k,p as u,o as n,t as C,q as T}from"./entry.1f9f5688.js";import{u as V,g as $,r as B}from"./i18n-validators.8fa5bffb.js";import{g as I,s as R,a as j,X as D}from"./index.f6473537.js";import{u as E}from"./fetch.77f91184.js";const N={setup(){const e=g().query.email,a=f({email:e,password:""}),i=V({password:{required:B},email:{}},a);return{state:a,v$:i,email:e}},data(){return{inputClasses:$(),incorrectResponse:!1,key:1}},methods:{async submit(){this.incorrectResponse=!1;let r=await this.v$.$validate(),e={...this.state};if(e.password=I(e.password),r){let a=await E("/auth/login",{method:"POST",body:{...e}}),t=(a==null?void 0:a.data.value)||{};t.token?(await R(t.token),await j(t.user),c("/dashboard")):this.incorrectResponse=!0}}},components:{XCircleIcon:D}},X={class:"w-full vertical-center"},q={class:"bg-white w-fit py-4 px-5 mx-auto"},F=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-sm"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),L=s("p",{class:"text-sm ml-1"},"Terug",-1),M=[F,L],S=s("div",{class:"text-center py-3"},[s("h1",{class:"font-bold text-2xl"},"Inloggen"),s("p",{class:"mt-2 text-gray-800 w-auto text-md w-2/3 mx-auto"},"Log in met jouw schoolmail of platform geregistreerde mail.")],-1),A={class:"w-3/4 mx-auto mt-6"},U=s("label",{for:"email",class:"block text-sm font-medium leading-6 text-gray-900"},[u("Email"),s("span",{class:"text-red-500"},"*")],-1),z={class:"mt-1"},H=["value"],O=s("label",{for:"password",class:"block text-sm font-medium leading-6 text-gray-900 mt-3"},[u("Wachtwoord"),s("span",{class:"text-red-500"},"*")],-1),P={class:"mt-1"},W={class:"error-msg"},G={key:0,class:"rounded-md bg-red-50 p-4 my-5"},J={class:"flex"},K={class:"flex-shrink-0"},Q=s("div",{class:"ml-3"},[s("h3",{class:"text-sm font-medium text-red-800"},"Email of wachtwoord is niet juist")],-1),Y={class:"my-5"};function Z(r,e,a,t,i,d){const m=T("XCircleIcon");return n(),l("div",X,[s("div",q,[s("button",{onClick:e[0]||(e[0]=o=>("navigateTo"in r?r.navigateTo:h(c))("/login")),class:"flex flex-row text-secondary hover:text-red-700"},M),S,s("div",A,[s("div",null,[U,s("div",z,[s("input",{type:"email",email:"email",id:"email",disabled:"",value:t.email,class:"block w-full rounded-md border-0 py-1.5 pl-4 text-gray-900 shadow-sm ring-1 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500 disabled:ring-gray-200 sm:text-sm sm:leading-6"},null,8,H)])]),s("div",null,[O,s("div",P,[w(s("input",{type:"password",password:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>t.state.password=o),onBlur:e[2]||(e[2]=(...o)=>t.v$.password.$touch&&t.v$.password.$touch(...o)),class:x([[t.v$.password.$errors.length?i.inputClasses.Errors:i.inputClasses.Default],"block w-full border-0 py-1.5 rounded-md pl-4 shadow-sm ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"])},null,34),[[v,t.state.password]])]),(n(!0),l(_,null,y(t.v$.password.$errors,o=>(n(),l("div",{class:"text-xs text-red-500 mt-1",key:o.$uid},[s("div",W,C(o.$message),1)]))),128))]),i.incorrectResponse?(n(),l("div",G,[s("div",J,[s("div",K,[b(m,{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),Q])])):k("",!0),s("div",Y,[s("button",{onClick:e[3]||(e[3]=(...o)=>d.submit&&d.submit(...o)),type:"button",class:"cursor-pointer rounded-md bg-primary px-3.5 py-2.5 w-full text-sm font-semibold text-white shadow-sm hover:bg-primary-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-dark"},"Volgende")])])])])}const as=p(N,[["render",Z]]);export{as as default};
